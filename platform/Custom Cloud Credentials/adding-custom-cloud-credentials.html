<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-176087655-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Grid AI" href="/opensearch.xml">
<script src="/js/termynal.js"></script>
<script src="/js/main.js"></script><title data-react-helmet="true">Grid-Managed BYOC | Grid AI</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.grid.ai/platform/Custom Cloud Credentials/adding-custom-cloud-credentials"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Grid-Managed BYOC | Grid AI"><meta data-react-helmet="true" name="description" content="This page describes BYOC cluster creation in Grid-Managed infrastructure mode. In this mode, Grid manages and provisions AWS infrastructure on your behalf in a fully automated fashion. To achieve this, Grid requires more permissions (including iam:FullAccess) than the self-managed BYOC mode requires."><meta data-react-helmet="true" property="og:description" content="This page describes BYOC cluster creation in Grid-Managed infrastructure mode. In this mode, Grid manages and provisions AWS infrastructure on your behalf in a fully automated fashion. To achieve this, Grid requires more permissions (including iam:FullAccess) than the self-managed BYOC mode requires."><link data-react-helmet="true" rel="icon" href="/images/logos/favicon-32x32.png"><link data-react-helmet="true" rel="canonical" href="https://docs.grid.ai/platform/Custom Cloud Credentials/adding-custom-cloud-credentials"><link data-react-helmet="true" rel="alternate" href="https://docs.grid.ai/platform/Custom Cloud Credentials/adding-custom-cloud-credentials" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.grid.ai/platform/Custom Cloud Credentials/adding-custom-cloud-credentials" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://800UQWIQ9P-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4da5a155.css">
<link rel="preload" href="/assets/js/runtime~main.9cd0b493.js" as="script">
<link rel="preload" href="/assets/js/main.7825c7bb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">Welcome to the new and improved Grid Documentation site!</div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logos/grid-logo-light.png" alt="Grid AI Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/images/logos/grid-logo-dark.png" alt="Grid AI Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/features/runs/README">Runs</a><a class="navbar__item navbar__link navbar__link--active" href="/features/sessions">Sessions</a><a class="navbar__item navbar__link navbar__link--active" href="/features/datastores">Datastores</a><a href="https://platform.grid.ai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Platform<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_LIo8"><nav class="menu thin-scrollbar menu_oAhv menuWithAnnouncementBar_IVfW"><ul class="theme-doc-sidebar-menu menu__list"><div class="search_mdk4"><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Grid in 3 minutes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/getting-started/getting-started-with-grid">GETTING STARTED</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/features/datastores">FEATURES</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/examples/running-with-different-frameworks/running-julia-programs">EXAMPLES</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cli">GRID CLI REFERENCE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/changelog">CHANGELOG</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/platform/best-practices">PLATFORM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/platform/billing/billing-and-credits">billing</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/github-integration">Integrating with GitHub</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/platform/Custom Cloud Credentials/byoc">Custom Cloud Credentials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/Custom Cloud Credentials/byoc">Bring Your Own Cloud (BYOC) Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/Custom Cloud Credentials/prereq-installation">BYOC Prereqs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/platform/Custom Cloud Credentials/adding-custom-cloud-credentials">Grid-Managed BYOC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/Custom Cloud Credentials/self-managed-byoc">Self-Managed BYOC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/Custom Cloud Credentials/grid-cluster-context">Cluster Context</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/Custom Cloud Credentials/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/machines">Machines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/collaboration">Collaboration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/feature-requests">Feature Requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/report-feedback">Report Feedback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/security-and-privacy">Security and Privacy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/sso">SSO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/tips-and-tricks">Tips and Tricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/known-issues">Known Issues</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/support/contact_support">SUPPORT</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_EBxv"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_AF9Q"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Overview</h1></header><p>This page describes BYOC cluster creation in Grid-Managed infrastructure mode. In this mode, Grid manages and provisions AWS infrastructure on your behalf in a fully automated fashion. To achieve this, Grid requires more permissions (including iam:FullAccess) than the self-managed BYOC mode requires.</p><p>This documentation assumes you have followed our <a href="/platform/Custom Cloud Credentials/prereq-installation">pre-requisites installation steps</a>.</p><header><h1>Deploying Grid-Managed Bring Your Own Cluster (BYOC) Mode</h1></header><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Request access to this feature! Send us a message to our <a href="https://gridai-community.slack.com" target="_blank" rel="noopener noreferrer">community Slack</a> or send email to <a href="mailto:support@grid.ai" target="_blank" rel="noopener noreferrer">support@grid.ai</a></p></div></div><p>Grid creates clusters inside your own cloud account, allowing you to maintain complete control over the resources that you need. We&#x27;ll guide you through the setup process for each of the supported cloud providers.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="amazon-web-services-aws">Amazon Web Services <!-- -->(<!-- -->AWS<!-- -->)<a class="hash-link" href="#amazon-web-services-aws" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h3><p>Grid creates clusters designed for large AI workloads. In order to do so, your AWS account needs to have the <strong>right permissions</strong> and <strong>quotas</strong>. We&#x27;ll cover both optional and required configurations as follows.</p><table><thead><tr><th align="left">Configuration</th><th align="left">Recommendation</th></tr></thead><tbody><tr><td align="left">Auto Scaling groups per region</td><td align="left">800</td></tr><tr><td align="left">Launch configurations per region</td><td align="left">600</td></tr><tr><td align="left">EC2 Spot <!-- -->(<!-- -->instance family you are interested in<!-- -->)</td><td align="left">1000+</td></tr><tr><td align="left">EC2 On-demand <!-- -->(<!-- -->instance family you are interested in<!-- -->)</td><td align="left">1000+</td></tr></tbody></table><p>AWS STS regional endpoints have to be enabled in the target region. Go to <a href="https://console.aws.amazon.com/iam/home#/account_settings" target="_blank" rel="noopener noreferrer">AWS account settings</a> and verify the regional endpoint is activated. In most cases your region already has AWS STS regional endpoint enabled, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html" target="_blank" rel="noopener noreferrer">IAM User Guide</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Skipping this step will cause issues that are difficult to debug. The kubelet will be unable to authenticate against the kubernetes API server and nothing will work.</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="requesting-quotas">Requesting Quotas<a class="hash-link" href="#requesting-quotas" title="Direct link to heading">​</a></h4><p>All AWS accounts have &quot;service quotas&quot;. These are limits for the utilization of service provided by AWS. In order to increase your quotas, you have to request a quota increase to a specific service. That will open a ticket with AWS support. You may need to follow-up on the ticket in order for the quota to be granted.</p><p>You can request a quota by doing the following:</p><ol><li>Login into your AWS console</li><li>Search for &quot;<a href="https://console.aws.amazon.com/servicequotas/home" target="_blank" rel="noopener noreferrer">Service Quotas</a>&quot; and click on the result</li><li>Click on the area of the service <!-- -->(<!-- -->e.g. &quot;Amazon Elastic Compute Cloud <!-- -->(<!-- -->Amazon EC2<!-- -->)<!-- -->&quot;<!-- -->)</li><li>Use the search filter to find the quota that you are looking for</li><li>Make a quota request</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-1-get-aws-credentials">Step 1: Get AWS Credentials<a class="hash-link" href="#step-1-get-aws-credentials" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="a-login-to-aws-and-search-for-iam">A: Login to AWS and search for IAM<a class="hash-link" href="#a-login-to-aws-and-search-for-iam" title="Direct link to heading">​</a></h4><p>Login to your AWS account. You will then use the search bar to find &quot;IAM&quot; <!-- -->(<!-- -->user management<!-- -->)<!-- -->.</p><p><img src="/assets/images/IAM-6ec3d9828b3460cd568fb108bc4e293a.png"></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="b-click-on-users">B: Click on &quot;Users&quot;<a class="hash-link" href="#b-click-on-users" title="Direct link to heading">​</a></h4><p>Click on the &quot;Users&quot; panel. You will be able to see a list of users. If you already have a user, click on your user name. If you don&#x27;t, move to the next step to create a new user.</p><p><img src="/assets/images/aws-list-users-a9501a83d1c8aa1e2d97c4c4d1fb944b.png"></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="c-create-new-user-optional">C: Create New User <!-- -->(<!-- -->optional<!-- -->)<a class="hash-link" href="#c-create-new-user-optional" title="Direct link to heading">​</a></h4><p>If you don&#x27;t have a user available and would like to create one, on the &quot;Users&quot; page click on &quot;Add user&quot;. Fill in the username of your preference and make sure to check &quot;Programmatic access&quot; <!-- -->(<!-- -->this allows you to use AWS keys<!-- -->)<!-- -->.</p><p><img src="/assets/images/aws-create-user-8443fa7d57e7f7db050c9c869160e41d.png"></p><p>Click on &quot;Next: Permissions&quot;.</p><p>The user should have IAMFullAccess privileges.</p><p>Click on &quot;Next: Tags&quot; <!-- -->&gt;<!-- --> &quot;Next: Review&quot; <!-- -->&gt;<!-- --> &quot;Create user&quot;.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="d-create-new-aws-keys">D: Create New AWS Keys<a class="hash-link" href="#d-create-new-aws-keys" title="Direct link to heading">​</a></h4><ol><li>Navigate to the &quot;Users&quot; page</li><li>Click on your user name</li><li>Click on the tab &quot;Security Credentials&quot;</li><li>Click on &quot;Create access key&quot;</li><li>Copy both the &quot;Access key ID&quot; and the &quot;Secret access key&quot; values</li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The &quot;Secret access key&quot; value will only be shown once. Make sure you copy that value and store it in a safe location.</p></div></div><p>Make sure that your username has the right policies attached in order to user Grid correctly. Refer to the section <a href="#step-2-add-iam-permissions-to-your-account">Adding Grid AWS Policies &amp; Roles</a> for more details.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-2-add-iam-permissions-to-your-account">Step 2: Add IAM permissions to your account<a class="hash-link" href="#step-2-add-iam-permissions-to-your-account" title="Direct link to heading">​</a></h3><p>The created user and fetched credentials for should have IAMFullAccess privileges.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Reach out to us via <a href="http://gridai-community.slack.com" target="_blank" rel="noopener noreferrer">Slack</a> or <a href="/platform/Custom Cloud Credentials/support@grid.ai">email</a> if you have any issues creating the following AWS roles and policies. We&#x27;re happy to help!</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="a-add-policies-to-your-account">A: Add Policies to Your Account<a class="hash-link" href="#a-add-policies-to-your-account" title="Direct link to heading">​</a></h4><p>The final step is to add all the Grid policies to your account. That means that your AWS keys will now be able to perform the operations required by Grid.</p><ol><li>First, log in to AWS and navigate to IAM</li><li>Click on &quot;Users&quot;</li><li>On the user&#x27;s page, find your user name and click on it</li><li>Click on &quot;Add permissions&quot;</li><li>Click on &quot;Attach existing policies directly&quot;</li></ol><p><img alt="Granting permissions to a user." src="/assets/images/aws-add-permissions-736895ac3b3c7377dbf6435435ec3a28.png"></p><ol><li>Search for the policy IAMFullAccess:</li><li>Click the Check Box to the left of <code>IAMFullAccess</code></li><li>Click on &quot;Next:Review&quot;</li><li>Click on &quot;Add permissions&quot;</li></ol><p>Now that you have added the right permissions to your username, you can use the user&#x27;s AWS API keys with Grid.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-3-create-role--policy-grid-requires">Step 3: Create Role &amp; Policy grid requires<a class="hash-link" href="#step-3-create-role--policy-grid-requires" title="Direct link to heading">​</a></h3><p>For the next step you&#x27;re going to create role we&#x27;re going to assume into. For this you&#x27;ll be using terraform. Make sure you have <code>git</code>, <code>terraform</code>, <code>jq</code> and <code>AWS CLI</code> installed on your machine. Installation instruction of these tools are <a href="/platform/Custom Cloud Credentials/prereq-installation#installation-steps">available here</a>. If you&#x27;re familiar with terraform we recommend you check the terraform module we&#x27;ll be using to create necessary roles &amp; policies, <a href="https://github.com/gridai/terraform-aws-gridbyoc" target="_blank" rel="noopener noreferrer">https://github.com/gridai/terraform-aws-gridbyoc</a>. This module is published on the official terraform registry for your convenience <a href="https://registry.terraform.io/modules/gridai/gridbyoc/aws/latest" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/modules/gridai/gridbyoc/aws/latest</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The script needs following list of permissions:</p></div></div><p>:::</p><ul><li>&quot;eks:<!-- -->*<!-- -->&quot;,</li><li>&quot;ecr:<!-- -->*<!-- -->&quot;,</li><li><strong>&quot;</strong>events<strong>:<!-- -->*<!-- -->&quot;,</strong></li><li>&quot;arn:aws:iam::aws:policy/AmazonEC2FullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/AmazonGuardDutyFullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/AmazonRoute53ResolverFullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/AmazonS3FullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/AmazonSNSFullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/AmazonSQSFullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/AmazonVPCFullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/CloudWatchLogsFullAccess&quot;,</li><li>&quot;arn:aws:iam::aws:policy/IAMFullAccess&quot;,
:::</li></ul><p>For quick start:</p><ul><li>Clone the repo</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/gridai/terraform-aws-gridbyoc.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> terraform-aws-gridbyoc/quick-start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Make sure your AWS CLI is properly configured with <a href="#d-create-new-aws-keys">id &amp; secret you created</a>. These are not shared with Grid.</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">unset</span><span class="token plain"> AWS_ACCESS_KEY_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">unset</span><span class="token plain"> AWS_SECRET_ACCESS_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">unset</span><span class="token plain"> AWS_SESSION_TOKEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aws configure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># prompt and example entries below</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS Access Key ID </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">None</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: xxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS Secret Access Key </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">None</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: xxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Default region name </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">None</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Default output </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">None</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Verify AWS Access Key</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">aws sts get-caller-identity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># example entries below should match the above steps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;UserId&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxxxxxxxx&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Account&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxxxxxxxx&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Arn&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;arn:aws:iam::xxxxxxxxx:user/xxxxxxxxx&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Run the Terraform script and enter the AWS Region when prompted. The region where the VPC is located is entered in the <a href="/platform/Custom Cloud Credentials/adding-custom-cloud-credentials#step-4-register-your-role-in-grid">later step</a>.</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># enter provider.aws.region</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">provider.aws.region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  The region where AWS operations will take place. Examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  are us-east-1, us-west-2, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">us-east-</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># long list of actions truncated and the final prompt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Do you want to perform these actions?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Terraform will perform the actions described above.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Only </span><span class="token string" style="color:#e3116c">&#x27;yes&#x27;</span><span class="token plain"> will be accepted to approve.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value: </span><span class="token function" style="color:#d73a49">yes</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Get the output from terraform. By default terraform hides the sensitive secret output.</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">terraform output -json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>From the previous command, you should get the following output:</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;external_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;sensitive&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;example-id&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;role_arn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;sensitive&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;arn:aws:iam::000000000000:role/example-role&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;role_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;sensitive&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;example-role&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Save <code>EXTERNAL_ID</code> and <code>ROLE_ARN</code> for use in <a href="/platform/Custom Cloud Credentials/adding-custom-cloud-credentials#step-4-register-your-role-in-grid">later steps</a>.</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">EXTERNAL_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">terraform output -json </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> jq -r </span><span class="token variable string" style="color:#e3116c">&#x27;.external_id.value&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ROLE_ARN</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">terraform output -json </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> jq -r </span><span class="token variable string" style="color:#e3116c">&#x27;.role_arn.value&#x27;</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-4-register-your-role-in-grid">Step 4: Register Your Role in Grid<a class="hash-link" href="#step-4-register-your-role-in-grid" title="Direct link to heading">​</a></h3><p>By default, Grid Sessions and Runs are spun up in Availability Zone <code>a</code>. Only specify the AWS region and not the AZ in the <code>--region</code> argument.</p><ul><li>Login to Grid.  Please reference the detailed <a href="/getting-started/typical-workflow-cli-user#step-0-install-the-grid-cli">steps</a> as required.</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> lightning-grid --upgrade</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grid login --username </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Grid user name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --key </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Grid API Key</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Create cluster in default region with default instance types.</li><li>Cluster name must be lower case alphanumeric characters, &#x27;-&#x27; or &#x27;.&#x27; is allowed but not &#x27;<!-- -->_<!-- -->&#x27;, and must start and end with an alphanumeric character</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">grid clusters aws --role-arn </span><span class="token variable" style="color:#36acaa">$ROLE_ARN</span><span class="token plain"> --external-id </span><span class="token variable" style="color:#36acaa">$EXTERNAL_ID</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cluster name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Create cluster in <code>us-west-2</code> region with default instance types</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">grid clusters aws --role-arn </span><span class="token variable" style="color:#36acaa">$ROLE_ARN</span><span class="token plain"> --external-id </span><span class="token variable" style="color:#36acaa">$EXTERNAL_ID</span><span class="token plain"> --region us-west-2 </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cluster name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Create cluster in <code>eu-west-2</code> region with <code>t2.medium</code> and <code>t2.xlarge</code> instance types</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">grid clusters aws --role-arn </span><span class="token variable" style="color:#36acaa">$ROLE_ARN</span><span class="token plain"> --external-id </span><span class="token variable" style="color:#36acaa">$EXTERNAL_ID</span><span class="token plain"> --region us-west-2 --instance-types t2.medium,t2.large </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cluster name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-5-wait-for-cluster-to-be-provisioned">Step 5: Wait for cluster to be provisioned<a class="hash-link" href="#step-5-wait-for-cluster-to-be-provisioned" title="Direct link to heading">​</a></h3><p>After submitting the cluster creation request, you can check the cluster state by running:</p><div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">grid clusters</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And wait for your cluster status be <code>running</code>:</p><div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">┏━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━┓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ id                 ┃ name               ┃ type       ┃ status  ┃ created       ┃</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┡━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━┩</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ grid-cloud-prod    │ grid-prod-cloud    │ grid-cloud │ running │ 2 days ago    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ &lt;cluster name&gt;     │ &lt;cluster name&gt;     │ byoc       │ running │ a hour ago    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────────┴────────────────────┴────────────┴─────────┴───────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>It can take some time to provision a new cluster, ~30-50 minutes. Optionally, you can add <code>--wait</code> flag on the cluster creation step, and grid CLI will wait until the cluster is running.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-6-run-your-workloads-in-your-new-cluster">Step 6: Run your workloads in your new cluster<a class="hash-link" href="#step-6-run-your-workloads-in-your-new-cluster" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">grid run --cluster &lt;cluster name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grid session create --cluster &lt;cluster name&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Or if you&#x27;re using config file set the <code>.compute.provider.cluster</code> field to the cluster name you&#x27;ve just provisioned.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-7-enjoy">Step 7: Enjoy!<a class="hash-link" href="#step-7-enjoy" title="Direct link to heading">​</a></h3><p>Your cluster will be available for use on Grid, so use it <!-- -->(<!-- -->or any other cluster<!-- -->)<!-- --> as you wish.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="editing-and-deleting-clusters">Editing and Deleting Clusters<a class="hash-link" href="#editing-and-deleting-clusters" title="Direct link to heading">​</a></h2><p>Use <code>grid edit</code> to see instance types available and update as necessary.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">grid edit cluster </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cluster name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Use <code>grid delete</code> to delete cluster. Deleting a cluster will delete its resources, including runing resources. The deletion will take ~20-30 minutes. Use with care! The flag <code>--wait</code> is also available here, in the case of using, grid CLI will wait until the cluster is deleted.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Grid attempts to delete all cluster resources when a delete operation is initiated. However, sometimes there are dangling resources left behind. Make sure to inspect your account for dangling resources and delete them manually if that is the case. Reach out to support if you have any issues -- we are happy to help!</p></div></div><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">grid delete cluster </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cluster name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next, use terraform to delete the AWS resources you created as part of the install process.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">terraform destroy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>Next Steps</h1></header><p>Now that you have gotten a feel for deploying Grid Managed BYOC Mode, we would like to show you the Enterprise-ready mode called <a href="/platform/Custom Cloud Credentials/self-managed-byoc">Self Managed BYOC Mode</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gridai/grid-docs/edit/master/docs/platform/2_Custom Cloud Credentials/3_adding-custom-cloud-credentials.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/platform/Custom Cloud Credentials/prereq-installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BYOC Prereqs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/platform/Custom Cloud Credentials/self-managed-byoc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Self-Managed BYOC</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#amazon-web-services-aws" class="table-of-contents__link toc-highlight">Amazon Web Services (AWS)</a><ul><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#step-1-get-aws-credentials" class="table-of-contents__link toc-highlight">Step 1: Get AWS Credentials</a></li><li><a href="#step-2-add-iam-permissions-to-your-account" class="table-of-contents__link toc-highlight">Step 2: Add IAM permissions to your account</a></li><li><a href="#step-3-create-role--policy-grid-requires" class="table-of-contents__link toc-highlight">Step 3: Create Role &amp; Policy grid requires</a></li><li><a href="#step-4-register-your-role-in-grid" class="table-of-contents__link toc-highlight">Step 4: Register Your Role in Grid</a></li><li><a href="#step-5-wait-for-cluster-to-be-provisioned" class="table-of-contents__link toc-highlight">Step 5: Wait for cluster to be provisioned</a></li><li><a href="#step-6-run-your-workloads-in-your-new-cluster" class="table-of-contents__link toc-highlight">Step 6: Run your workloads in your new cluster</a></li><li><a href="#step-7-enjoy" class="table-of-contents__link toc-highlight">Step 7: Enjoy!</a></li></ul></li><li><a href="#editing-and-deleting-clusters" class="table-of-contents__link toc-highlight">Editing and Deleting Clusters</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row"><div class="footer__links text--left col-12 col-md-6"><div class="footer__links"><a href="https://twitter.com/gridai_" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-twitter_H+YA"></span></a><a href="https://www.youtube.com/channel/UCZYvMtnyzp0hrV2VXWUWL5w" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-youtube_AMCj"></span></a><a href="https://www.linkedin.com/company/grid-ai" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-linkedin_qvBC"></span></a><a href="https://www.facebook.com/grid.ai.1" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-facebook_dvJl"></span></a><a href="https://join.slack.com/t/gridai-community/shared_invite/zt-ozqiwuif-UYK6rZGVmTTpMfPcVSdicg" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-slack_b9n1"></span></a><a href="https://grid.ai" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-solid-globe_5L6P"></span></a><a href="mailto:support@grid.ai" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-solid-envelope_P+u9"></span></a></div></div><div class="footer__bottom text--right col-12 col-md-6"><div class="footer__copyright">Copyright © 2022 GRID AI</div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.9cd0b493.js"></script>
<script src="/assets/js/main.7825c7bb.js"></script>
</body>
</html>