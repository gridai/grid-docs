<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-176087655-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Grid AI" href="/opensearch.xml">
<script src="/js/termynal.js"></script>
<script src="/js/main.js"></script><title data-react-helmet="true">Tips and Tricks | Grid AI</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.grid.ai/platform/tips-and-tricks"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Tips and Tricks | Grid AI"><meta data-react-helmet="true" name="description" content="Tips &amp; Tricks"><meta data-react-helmet="true" property="og:description" content="Tips &amp; Tricks"><link data-react-helmet="true" rel="icon" href="/images/logos/favicon-32x32.png"><link data-react-helmet="true" rel="canonical" href="https://docs.grid.ai/platform/tips-and-tricks"><link data-react-helmet="true" rel="alternate" href="https://docs.grid.ai/platform/tips-and-tricks" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.grid.ai/platform/tips-and-tricks" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://800UQWIQ9P-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4da5a155.css">
<link rel="preload" href="/assets/js/runtime~main.52acb776.js" as="script">
<link rel="preload" href="/assets/js/main.6b9b1fbd.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logos/grid-logo-light.png" alt="Grid AI Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/images/logos/grid-logo-dark.png" alt="Grid AI Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/features/runs/README">Runs</a><a class="navbar__item navbar__link navbar__link--active" href="/features/sessions">Sessions</a><a class="navbar__item navbar__link navbar__link--active" href="/features/datastores">Datastores</a><a href="https://platform.grid.ai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Platform<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_LIo8"><nav class="menu thin-scrollbar menu_oAhv"><ul class="theme-doc-sidebar-menu menu__list"><div class="search_mdk4"><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Grid in 3 minutes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/getting-started/getting-started-with-grid">GETTING STARTED</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/features/datastores">FEATURES</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/examples/running-with-different-frameworks/running-julia-programs">EXAMPLES</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cli">GRID CLI REFERENCE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/changelog">CHANGELOG</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/platform/best-practices">PLATFORM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/platform/Billing/billing-and-credits">Billing</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/github-integration">Integrating with GitHub</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/platform/Custom Cloud Credentials/byoc">Custom Cloud Credentials</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/credentials">Credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/machines">Machines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/collaboration">Collaboration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/feature-requests">Feature Requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/report-feedback">Report Feedback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/security-and-privacy">Security and Privacy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/sso">SSO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/platform/tips-and-tricks">Tips and Tricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/known-issues">Known Issues</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/support/contact_support">SUPPORT</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_EBxv"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_AF9Q"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tips &amp; Tricks</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="tips--tricks-1">Tips &amp; Tricks<a class="hash-link" href="#tips--tricks-1" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="interruptible-runs">Interruptible Runs<a class="hash-link" href="#interruptible-runs" title="Direct link to heading">‚Äã</a></h3><p><a href="/features/runs/Creating Runs/Adv Runs/interruptible-machines">Interruptible Runs</a> powered by spot instances are <strong>50-90%</strong> cheaper but a machine can be interrupted at anytime. If you are using PyTorch Lightning and a job gets interrupted you can load the checkpoints.</p><p>Grid helps you directly continue your Runs where you left off as follows.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ArgumentParser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;--checkpoint_path&#x27;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parser.parse_args</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> args.checkpoint_path:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        trainer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LitModel.load_from_checkpoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">checkpoint_path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">args.checkpoint_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grid run --g_use_spot train.py --checkpoint_path </span><span class="token string" style="color:#e3116c">&quot;Artifact URL &quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information check out</p><ul><li><a href="https://docs.grid.ai/platform/billing-rates" target="_blank" rel="noopener noreferrer">Interruptible Pricing</a></li><li><a href="https://docs.grid.ai/features/runs/artifacts" target="_blank" rel="noopener noreferrer">Grid Artifacts</a></li><li><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/weights_loading.html" target="_blank" rel="noopener noreferrer">Lightning Loading Checkpoints</a></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="stop-a-run-after-x-hours">Stop a Run after X hours<a class="hash-link" href="#stop-a-run-after-x-hours" title="Direct link to heading">‚Äã</a></h3><p>As a convenience, we provide a <a href="https://github.com/PyTorchLightning/gridai-stop-run" target="_blank" rel="noopener noreferrer">GitHub Action</a> for stopping a Run that has been running for X no of hours.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="autostructuring-deep-learning-training">AutoStructuring Deep Learning Training<a class="hash-link" href="#autostructuring-deep-learning-training" title="Direct link to heading">‚Äã</a></h3><p>The recent 1.3 Release of PyTorch Lightning provides a new Lightning CLI <!-- -->[<!-- -->beta<!-- -->]<!-- --> for <a href="https://devblog.pytorchlightning.ai/auto-structuring-deep-learning-projects-with-the-lightning-cli-9f40f1ef8b36" target="_blank" rel="noopener noreferrer">Auto Structuring Deep Learning Training</a>.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">from pytorch_lightning.utilities.cli </span><span class="token function" style="color:#d73a49">import</span><span class="token plain"> LightningCLI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LightningCLI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyModel, MyData, </span><span class="token assign-left variable" style="color:#36acaa">trainer_defaults</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;max_epochs&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When combined with Grid, the Lightning CLI enhances your train scripts, enabling you quickly take advantage of any hardware configuration and perform Grid Data, Model and Trainer sweeps without having to integrate external libraries or add extra code. For more information check out:</p><ul><li><a href="https://devblog.pytorchlightning.ai/auto-structuring-deep-learning-projects-with-the-lightning-cli-9f40f1ef8b36" target="_blank" rel="noopener noreferrer">Auto Structuring Deep Learning Projects with the Lightning CLI</a></li><li><a href="https://docs.grid.ai/features/runs/sweep-syntax" target="_blank" rel="noopener noreferrer">Configuring Grid Hyper Parameter Sweeps</a></li><li><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/lightning_cli.html" target="_blank" rel="noopener noreferrer">PyTorch Lightning CLI Docs</a></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="early-stopping">Early Stopping<a class="hash-link" href="#early-stopping" title="Direct link to heading">‚Äã</a></h3><p>The recent 1.3 Release of PyTorch Lightning provides 3 New Thresholds for Early Stopping <!-- -->(<!-- -->Stopping, Divergence, and Check Finite<!-- -->)<!-- --> that can save you significant money on your Grid Runs.</p><p>The <a href="https://pytorch-lightning.readthedocs.io/en/latest/common/early_stopping.html" target="_blank" rel="noopener noreferrer">EarlyStopping</a> Callback in Lightning allows the Trainer to automatically stop when a given metric stops improving. You can define your own custom metrics or take advantage of our <a href="https://bit.ly/2RxOvVp" target="_blank" rel="noopener noreferrer">TorchMetrics package</a> to select common metrics to log and monitor. Early Stopping is perfect for <a href="https://docs.grid.ai/features/runs#runs" target="_blank" rel="noopener noreferrer">Grid Runs</a> because it limits the time spent on experiments that lead to poor convergence or overfitting.</p><p>Using EarlyStopping Thresholds into your PL Runs is a simple as adding the following few lines to your code.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">from pytorch_lightning.callbacks </span><span class="token function" style="color:#d73a49">import</span><span class="token plain"> EarlyStopping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from pytorch_lightning </span><span class="token function" style="color:#d73a49">import</span><span class="token plain"> Trainerearly_stopping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> EarlyStopping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">monitor</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;val_loss&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">stopping_threshold</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">1e-4, </span><span class="token comment" style="color:#999988;font-style:italic"># Stops training immediately once the monitored quantity reaches this threshold</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">divergence_threshold</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">9.0</span><span class="token plain">, </span><span class="token comment" style="color:#999988;font-style:italic"># Stops training as soon as the monitored quantity becomes worse than this threshold</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">check_finite</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">True, </span><span class="token comment" style="color:#999988;font-style:italic"># Stops training if the monitored metric becomes NaN or infinite.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trainer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Trainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbacks</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">early_stopping</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can then pocket the savings or reinvest them into more promising configurations to take your model performance and convergence to the next level. For more information check out:</p><ul><li><a href="https://bit.ly/3fyBRgT" target="_blank" rel="noopener noreferrer">Grid Run Docs</a></li><li><a href="https://bit.ly/3fnIUZu" target="_blank" rel="noopener noreferrer">Early Stopping Docs</a></li><li><a href="https://bit.ly/2RxOvVp" target="_blank" rel="noopener noreferrer">Torch Metrics Package</a></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="sessions-and-data-files">Sessions and data files<a class="hash-link" href="#sessions-and-data-files" title="Direct link to heading">‚Äã</a></h3><p>Sometimes you need a quick way of copying files from your local machine to your grid session. I recently had to do this in order to configure the Kaggle CLI for a competition I was working on.Grid Sessions provide two clean options for uploading local files.</p><p><strong>Secure Copy SCP</strong></p><p>Once you‚Äôve configured <a href="https://docs.grid.ai/features/sessions/how-to-ssh-into-a-session?utm_source=slack&amp;utm_medium=social&amp;utm_campaign=tip-of-week" target="_blank" rel="noopener noreferrer">SSH with the Grid CLI</a> you can quickly copy files to your session with the scp command as follows</p><div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">scp local_file grid_session_name:~path_to_copy_to/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Using</strong> <a href="https://docs.grid.ai/features/sessions/jupyterlab-with-sessions?utm_source=slack&amp;utm_medium=social&amp;utm_campaign=tip-of-week" target="_blank" rel="noopener noreferrer"><strong>JupyterLab</strong></a>*<!-- -->*<!-- -->*<!-- -->*</p><p>If the CLI is not your thing; you can also upload files using jupyter hub</p><p><a href="https://www.youtube.com/watch?time_continue=14&amp;v=1bd2QHqQSH4&amp;feature=emb_title" target="_blank" rel="noopener noreferrer">This video</a> shows you how to do that. For more information check out:</p><ul><li><a href="https://docs.grid.ai/features/sessions?utm_source=slack&amp;utm_medium=social&amp;utm_campaign=tip-of-week" target="_blank" rel="noopener noreferrer">Grid Sessions Docs</a></li><li><a href="https://docs.grid.ai/features/sessions/how-to-ssh-into-a-session?utm_source=slack&amp;utm_medium=social&amp;utm_campaign=tip-of-week" target="_blank" rel="noopener noreferrer">SSH into a Grid Session</a></li><li><a href="https://linuxize.com/post/how-to-use-scp-command-to-securely-transfer-files/" target="_blank" rel="noopener noreferrer">SCP Command</a></li><li><a href="https://docs.grid.ai/features/sessions/jupyterlab-with-sessions?utm_source=slack&amp;utm_medium=social&amp;utm_campaign=tip-of-week" target="_blank" rel="noopener noreferrer">JupyterLab with Sessions</a></li><li><a href="https://jupyterlab.readthedocs.io/en/stable/user/files.html#uploading-and-downloading" target="_blank" rel="noopener noreferrer">JupyterLab Uploading and Downloading Files</a></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="keeping-track-of-costs">Keeping track of costs<a class="hash-link" href="#keeping-track-of-costs" title="Direct link to heading">‚Äã</a></h3><p>Have you ever wanted to estimate exactly how much a cloud training run will cost you.Well with PyTorch Lightning and Grid now you can.</p><p>The recent 1.3 Release of PyTorch Lightning provides a new trainer flag called <a href="https://pytorch-lightning.readthedocs.io/en/1.3.1/common/trainer.html?utm_source=social&amp;utm_medium=slack&amp;utm_campaign=tip_of_week#max-time" target="_blank" rel="noopener noreferrer">max<!-- -->_<!-- -->time</a> that can enable you to stop your <a href="https://docs.grid.ai/features/runs#runs" target="_blank" rel="noopener noreferrer">Grid Run</a> and save a checkpoint when you‚Äôve reached the max allotted time.</p><p>Combined with Grid&#x27;s ability to estimate how much a run will cost you per an hour you can use this flag to better budget your experiments.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Default (disabled)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trainer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Trainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_time</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic"># Stop after 12 hours of training or when reaching 10 epochs (string)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trainer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Trainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_time</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;00:12:00:00&quot;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">max_epochs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic"># Stop after 1 day and 5 hours (dict)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trainer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Trainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_time</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;days&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;hours&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>With this trick you can better manage your training budget and invest it into more promising configurations to take your model performance and convergence to the next level.For more information check out:</p><ul><li><a href="https://bit.ly/3fyBRgT" target="_blank" rel="noopener noreferrer">Grid Run Docs</a></li><li><a href="https://pytorch-lightning.readthedocs.io/en/1.3.1/common/trainer.html?utm_source=social&amp;utm_medium=slack&amp;utm_campaign=tip_of_week#max-time" target="_blank" rel="noopener noreferrer">Max Time Docs</a></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="periodic-uploads-of-datasets-to-datastores">Periodic Uploads of Datasets to Datastores<a class="hash-link" href="#periodic-uploads-of-datasets-to-datastores" title="Direct link to heading">‚Äã</a></h3><p>Did you know the you can schedule periodic uploading Datasets to Datastores ?</p><p>The machine learning data is dynamic. If a ML model was trained on data from 2018 it might model a term such as, ‚Äúcorona‚Äù differently than a model that was continuously kept up to date. To help make pipelining easier Grid supports periodic uploading of data from its source to a Datastore.</p><p>Here is an example of how you can quickly configure this functionality.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="write-out-current-crontab">write out current crontab<a class="hash-link" href="#write-out-current-crontab" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">crontab</span><span class="token plain"> -l </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> mycron</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="run-datastore-upload-every-hour-every-day">run datastore upload every hour every day<a class="hash-link" href="#run-datastore-upload-every-hour-every-day" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0  **** grid datastore create --source data/path --name dataset&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> mycron</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="install-new-cron-file">install new cron file<a class="hash-link" href="#install-new-cron-file" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">crontab</span><span class="token plain"> mycron </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> mycron</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gridai/grid-docs/edit/master/docs/platform/10_tips-and-tricks.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-07-20T15:05:35.000Z">7/20/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/platform/sso"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SSO</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/platform/known-issues"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Known Issues</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tips--tricks-1" class="table-of-contents__link toc-highlight">Tips &amp; Tricks</a><ul><li><a href="#interruptible-runs" class="table-of-contents__link toc-highlight">Interruptible Runs</a></li><li><a href="#stop-a-run-after-x-hours" class="table-of-contents__link toc-highlight">Stop a Run after X hours</a></li><li><a href="#autostructuring-deep-learning-training" class="table-of-contents__link toc-highlight">AutoStructuring Deep Learning Training</a></li><li><a href="#early-stopping" class="table-of-contents__link toc-highlight">Early Stopping</a></li><li><a href="#sessions-and-data-files" class="table-of-contents__link toc-highlight">Sessions and data files</a></li><li><a href="#keeping-track-of-costs" class="table-of-contents__link toc-highlight">Keeping track of costs</a></li><li><a href="#periodic-uploads-of-datasets-to-datastores" class="table-of-contents__link toc-highlight">Periodic Uploads of Datasets to Datastores</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row"><div class="footer__links text--left col-12 col-md-6"><div class="footer__links"><a href="https://twitter.com/gridai_" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-twitter_H+YA"></span></a><a href="https://www.youtube.com/channel/UCZYvMtnyzp0hrV2VXWUWL5w" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-youtube_AMCj"></span></a><a href="https://www.linkedin.com/company/grid-ai" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-linkedin_qvBC"></span></a><a href="https://www.facebook.com/grid.ai.1" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-facebook_dvJl"></span></a><a href="https://join.slack.com/t/gridai-community/shared_invite/zt-ozqiwuif-UYK6rZGVmTTpMfPcVSdicg" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-brands-slack_b9n1"></span></a><a href="https://grid.ai" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-solid-globe_5L6P"></span></a><a href="mailto:support@grid.ai" target="_blank" rel="noopener noreferrer" class="icon_hNi9 footer__link-item"><span class="fontawesome-solid-envelope_P+u9"></span></a></div></div><div class="footer__bottom text--right col-12 col-md-6"><div class="footer__copyright">Copyright ¬© 2022 GRID AI</div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.52acb776.js"></script>
<script src="/assets/js/main.6b9b1fbd.js"></script>
</body>
</html>