"use strict";(self.webpackChunkgrid_docs=self.webpackChunkgrid_docs||[]).push([[582],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(t),m=a,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return t?r.createElement(f,s(s({ref:n},u),{},{components:t})):r.createElement(f,s({ref:n},u))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,s=new Array(i);s[0]=p;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var c=2;c<i;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},233:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return p}});var r=t(7462),a=t(3366),i=(t(7294),t(3905)),s=["components"],o={},l="Using YAML",c={unversionedId:"features/runs/yaml-configs/yaml-api",id:"features/runs/yaml-configs/yaml-api",title:"Using YAML",description:"In addition to CLI parameters, Grid supports the use of YML files so you don't have to pass in many parameters in all occasions. If you don't change compute parameters often, we suggest you create a Grid config file and use that instead.",source:"@site/docs/features/runs/17_yaml-configs/2_yaml-api.md",sourceDirName:"features/runs/17_yaml-configs",slug:"/features/runs/yaml-configs/yaml-api",permalink:"/features/runs/yaml-configs/yaml-api",editUrl:"https://github.com/gridai/grid-docs/edit/master/docs/features/runs/17_yaml-configs/2_yaml-api.md",tags:[],version:"current",lastUpdatedAt:1658329535,formattedLastUpdatedAt:"7/20/2022",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"FAQ",permalink:"/features/runs/faq"},next:{title:"\u26a1\ufe0fMobile",permalink:"/features/mobile/"}},u=[{value:"Grid Run Spec Overview",id:"grid-run-spec-overview",children:[{value:"Creating Runs With a Config File",id:"creating-runs-with-a-config-file",children:[],level:3}],level:2},{value:"Grid Session Spec Overview",id:"grid-session-spec-overview",children:[{value:"Creating Sessions With a Config File",id:"creating-sessions-with-a-config-file",children:[],level:3}],level:2}],d={toc:u};function p(e){var n=e.components,t=(0,a.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"using-yaml"},"Using YAML"),(0,i.kt)("p",null,"In addition to CLI parameters, Grid supports the use of YML files so you don't have to pass in many parameters in all occasions. If you don't change compute parameters often, we suggest you create a Grid config file and use that instead."),(0,i.kt)("h2",{id:"grid-run-spec-overview"},"Grid Run Spec Overview"),(0,i.kt)("p",null,"The following YML file contains a commented version of every YML key. When writing config file you only need to provide keys and values for the parameters that you actually want to change to what you need. There is no need to have all keys in the config, the ones missing will have the default CLI values."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Use either ",(0,i.kt)("a",{parentName:"p",href:"/platform/Custom%20Cloud%20Credentials/grid-cluster-context"},"cluster context")," or make sure to place your cluster ID in the ",(0,i.kt)("inlineCode",{parentName:"p"},"cluster")," field, replacing the ",(0,i.kt)("strong",{parentName:"p"},"prod-2")," value."))),(0,i.kt)("p",null,"Config can be used to specify arguments that will be used to run experiments.\nApart from parametrization config allows to define custom ",(0,i.kt)("inlineCode",{parentName:"p"},"actions")," executed in given moments of the experitment lifecycle, and pass environment variables.\nTutorial on how to create runs from config file and fully leverage its capabilities is available ","[here]","(../1_Creating Runs/2_Adv Runs/3_creating-runs-from-config.md)\nTo check the defaults please refer to the CLI docs ",(0,i.kt)("a",{parentName:"p",href:"../../cli.md"},"here"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"# Main compute configuration. Defines parameters for `grid run` command. \ncompute:\n\n  # For BYOC users, we can specify directly which cluster to run experiments on.\n  provider:\n    cluster: prod-2                         # [str] --cluster\n\n  # Train section defines the training environment each experiement eg. instance type, datastore access, custom actions.\n  train:\n    framework: lightning                    # [enum] --framework\n    environment:\n      MY_ENVIRONMENT_VARIABLE: \"example\"    # Pass in environment variables\n    dependency_file_info:\n      path: null                            # [str] --dependency_file\n    instance: m5a.large                     # [enum] --instance_type\n    use_spot: False                         # [str] --use_spot\n    storage_gb: 100                         # [int] --memory [should be greater than 100Gb]\n    localdir: False                         # [bool] --localdir\n    dockerfile: null                        # [str] --dockerfile\n    auto_resume: bool                       # [bool] --auto_resume (flag)\n    datastore_name: null                    # [str] --datastore_name\n    datastore_version: null                 # [int] --datastore_version\n    datastore_mount_dir: null               # [str] by default mounts to /datastores/{datastore_name}  --datastore_mount_dir\n    actions:                                # Pass list of commands to be executed at given moment.\n      on_build: null                        # List[str]\n      on_build_start: null\n      on_build_end: null\n      on_experiment_end: null\n      on_experiment_start: null\n    scratch:\n      size_gb: 100                          # [int] --scratch_size default 100 int\n      mount_path: /tmp/scratch              # [str] --scratch_mount_path default\n\n# This section defines the hyperparameters settings. \n# We currently have 3 strategies: grid_search, random_search and none.\n# strategy_options are only for the random_search strategy.\nhyper_params:\n  settings:\n    strategy: grid_search                   # [enum] One of `['grid_search', 'random_search', 'none']`\n    strategy_options:                       # For 'random_search' we must at least define num_trials \n      num_trials: 1                         # [int] we must specify the num_trials (via CLI or config) if we use random_search strategy (--num_trials)\n      seed: 0                               # [int] --seed\n  \n  # Additional script parameters appended as \"{key} {value}\"\n  params: [dict[str, str]]                  # Dict of key: value entries appended to as script parameters\n    --foo: 1                                # [str: str]\n    -bar: something\n")),(0,i.kt)("h3",{id:"creating-runs-with-a-config-file"},"Creating Runs With a Config File"),(0,i.kt)("p",null,"You can create a Run with a config file instead of passing CLI arguments. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"grid run --config my_config.yml script.py\n")),(0,i.kt)("h2",{id:"grid-session-spec-overview"},"Grid Session Spec Overview"),(0,i.kt)("p",null,"It's also possible to use config files to define parameters for Grid Sessions."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"# Main compute configuration. Defines parameters for `grid session` command. \ncompute:\n\n  # For BYOC users, we can specify directly which cluster to run experiments on.\n  provider:\n    cluster: prod-2                         # [str] --cluster\n  train:\n    instance_type: m5a.large                # [str] --instance_type\n    disk_size: 200                          # [int] --disk_size\n    use_spot: False                         # [bool] --use_spot\n    datastore_name: null                    # [str] --datastore_name\n    datastore_version: null                 # [int] --datastore_version\n    datastore_mount_dir: null               # [str] --datastore_mount_dir\n")),(0,i.kt)("h3",{id:"creating-sessions-with-a-config-file"},"Creating Sessions With a Config File"),(0,i.kt)("p",null,"To create a new Session defined in ",(0,i.kt)("inlineCode",{parentName:"p"},"my_session_config.yml")," file, just run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"grid session create --config my_session_config.yml\n")))}p.isMDXComponent=!0}}]);