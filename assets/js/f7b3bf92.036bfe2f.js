"use strict";(self.webpackChunkgrid_docs=self.webpackChunkgrid_docs||[]).push([[821],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return n?a.createElement(h,s(s({ref:t},c),{},{components:n})):a.createElement(h,s({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var u=2;u<i;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7873:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return c},default:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),s=["components"],o={title:"Basic Run Creation",sidebar_label:"Basic Run Creation"},l=void 0,u={unversionedId:"features/runs/Creating Runs/Basic Runs/basic-runs",id:"features/runs/Creating Runs/Basic Runs/basic-runs",title:"Basic Run Creation",description:"The following examples assume you have already installed and setup Grid. If you haven't already please visit the Getting Started page.",source:"@site/docs/features/runs/1_Creating Runs/1_Basic Runs/2_basic-runs.md",sourceDirName:"features/runs/1_Creating Runs/1_Basic Runs",slug:"/features/runs/Creating Runs/Basic Runs/basic-runs",permalink:"/features/runs/Creating Runs/Basic Runs/basic-runs",editUrl:"https://github.com/gridai/grid-docs/edit/master/docs/features/runs/1_Creating Runs/1_Basic Runs/2_basic-runs.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Basic Run Creation",sidebar_label:"Basic Run Creation"},sidebar:"tutorialSidebar",previous:{title:"Grid Runs Overview",permalink:"/features/runs/Creating Runs/README"},next:{title:"Hyperparameter Sweep Syntax",permalink:"/features/runs/Creating Runs/Basic Runs/sweep-syntax"}},c=[{value:"Creating Vanilla Runs",id:"creating-vanilla-runs",children:[],level:2},{value:"Creating Runs with Script Dependencies",id:"creating-runs-with-script-dependencies",children:[{value:"Handling Requirements",id:"handling-requirements",children:[],level:3},{value:"Runs with Specified requirements.txt",id:"runs-with-specified-requirementstxt",children:[],level:3},{value:"Runs with Specified environment.yml",id:"runs-with-specified-environmentyml",children:[],level:3},{value:"Viewing Logs",id:"viewing-logs",children:[],level:3}],level:2},{value:"Attaching Datastores to Runs",id:"attaching-datastores-to-runs",children:[],level:2}],p={toc:c};function d(e){var t=e.components,o=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The following examples assume you have already installed and setup Grid. If you haven't already please visit the ",(0,i.kt)("a",{parentName:"p",href:"/getting-started/getting-started-with-grid"},"Getting Started")," page.\nAlso, if you encounter issues please check the ",(0,i.kt)("a",{parentName:"p",href:"/features/runs/faq"},"FAQ"),". We periodically update this page with user questions."))),(0,i.kt)("h1",{id:"how-to-create-runs"},"How to Create Runs"),(0,i.kt)("p",null,'Runs are highly customizable "serverless" compute instances. Here we will cover all the methods made available to customize Runs for common use cases. The examples below cover the following:'),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.grid.ai/features/runs/Creating%20Runs/Basic%20Runs/basic-runs#creating-vanilla-runs"},'Creating "vanilla" Runs')),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.grid.ai/features/runs/Creating%20Runs/Basic%20Runs/basic-runs#creating-runs-with-script-dependencies"},"Creating Runs with script dependencies"),(0,i.kt)("br",{parentName:"li"}),"3.1 Handling requirements",(0,i.kt)("br",{parentName:"li"}),"3.2 Runs with specified requirements.txt",(0,i.kt)("br",{parentName:"li"}),"3.3 Runs with specified environment.yml"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.grid.ai/features/runs/Creating%20Runs/Basic%20Runs/basic-runs#attaching-datastores-to-runs"},"Attaching Datastores to Runs"))),(0,i.kt)("h2",{id:"creating-vanilla-runs"},"Creating Vanilla Runs"),(0,i.kt)("p",null,'A "vanilla" Run is a Run that runs a simple script, such as the classic "hello world" example. The vanialla run in the example below is taken from the ',(0,i.kt)("a",{parentName:"p",href:"https://github.com/PyTorchLightning/grid-tutorials/tree/main/features-intro/runs"},"grid-tutorials repo"),"."),(0,i.kt)("p",null,"First, clone the repo, navigate to the ",(0,i.kt)("inlineCode",{parentName:"p"},"features-intro/runs")," directory, and create a simple run using the ",(0,i.kt)("inlineCode",{parentName:"p"},"hello.py")," script."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"git clone https://github.com/PyTorchLightning/grid-tutorials.git\ncd grid-tutorials/features-intro/runs\ngrid run --name hello hello.py\n")),(0,i.kt)("p",null,"The above code is passing a script named ",(0,i.kt)("inlineCode",{parentName:"p"},"hello.py")," to the run. The script will print out 'hello_world'. "),(0,i.kt)("p",null,"For instructions on how to view run and experiment logs, check out the\nnext section ",(0,i.kt)("a",{parentName:"p",href:"https://docs.grid.ai/features/runs/Analyzing%20Runs/viewing-logs"},"Viewing logs produced by Runs"),"."),(0,i.kt)("h2",{id:"creating-runs-with-script-dependencies"},"Creating Runs with Script Dependencies"),(0,i.kt)("p",null,"If you've taken a peak at the grid-tutorials repo, you may have noticed three things:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"It has a requirements.txt in the root directory"),(0,i.kt)("li",{parentName:"ol"},"There is a directory called ",(0,i.kt)("inlineCode",{parentName:"li"},"pip")," "),(0,i.kt)("li",{parentName:"ol"},"There is a directory called ",(0,i.kt)("inlineCode",{parentName:"li"},"conda"))),(0,i.kt)("p",null,"In sections below, you'll see why these three points are important, but first let's explore how runs handle requirements."),(0,i.kt)("h3",{id:"handling-requirements"},"Handling Requirements"),(0,i.kt)("p",null,"Anytime you submit a Grid run, we attempt to resolve as many dependencies as we can automatically for you. However, we recommend that your projects have a ",(0,i.kt)("inlineCode",{parentName:"p"},"requirements.txt")," file in the root."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Grid also allows the pip installation of private packages. Many acceptable ways for accomplishing this are detailed ",(0,i.kt)("a",{parentName:"p",href:"https://docs.readthedocs.io/en/stable/guides/private-python-packages.html"},"here"),". You also have the ability to customize this behavior a bit by combining either the advanced ",(0,i.kt)("a",{parentName:"p",href:"/features/runs/Creating%20Runs/Adv%20Runs/creating-runs-with-dockerfile"},"Dockerfile"),", ",(0,i.kt)("a",{parentName:"p",href:"/features/runs/Creating%20Runs/Adv%20Runs/creating-runs-from-config#creating-runs-with-a-config-file"},"config.yaml"),", or ",(0,i.kt)("a",{parentName:"p",href:"/features/runs/Creating%20Runs/Adv%20Runs/creating-runs-from-config#config-files-with-actions"},"Actions")," features. These will allow you to use a setup.py for installation or keep the regular pip installation."))),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(818).Z})),(0,i.kt)("p",null,"When creating a run, you can explicitly specify a requirements file using the ",(0,i.kt)("inlineCode",{parentName:"p"},"--dependency_file")," property. This flag tells Grid which file should be used for package installation in the Run. Supported requirements files are ",(0,i.kt)("inlineCode",{parentName:"p"},"requirements.txt")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"environment.yml"),". This is especially useful when your directory isn't structured in such a way that the requirements file resides at the root of the project. In such cases, you can use the below examples for specifying which requirements.txt or environment.yml file should be used by your run. "),(0,i.kt)("h3",{id:"runs-with-specified-requirementstxt"},"Runs with Specified requirements.txt"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"git clone https://github.com/PyTorchLightning/grid-tutorials.git\ncd grid-tutorials/features-intro/runs\ngrid run --name specified-requirements-pip --dependency_file ./pip/requirements.txt hello.py\n")),(0,i.kt)("h3",{id:"runs-with-specified-environmentyml"},"Runs with Specified environment.yml"),(0,i.kt)("p",null,"Specifying an environment.yml file is the only way to get Runs to use the Conda package manager without using a config file. Because ",(0,i.kt)("inlineCode",{parentName:"p"},"conda export")," will output dependencies specfiically for your operating system, this can cause issues when running on a non-Linux machine. In such cases we recommend using\n",(0,i.kt)("inlineCode",{parentName:"p"},"conda env export --from-history")," as mentioned in the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#exporting-an-environment-file-across-platforms"},"official docoumentation"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"git clone https://github.com/PyTorchLightning/grid-tutorials.git\ncd grid-tutorials/features-intro/runs\ngrid run --name specified-requirements-conda --dependency_file ./conda/environemnt.yml hello.py\n")),(0,i.kt)("h3",{id:"viewing-logs"},"Viewing Logs"),(0,i.kt)("p",null,"Explore the build logs to compare the logs of this Run to that of the vanilla Run we created in the example above.\nFor instructions on how to view the logs check out ",(0,i.kt)("a",{parentName:"p",href:"https://docs.grid.ai/features/runs/Analyzing%20Runs/viewing-logs"},"viewing logs produced by Runs"),"."),(0,i.kt)("h2",{id:"attaching-datastores-to-runs"},"Attaching Datastores to Runs"),(0,i.kt)("p",null,"When working with large datasets, it may be faster and easier to store your data in a ",(0,i.kt)("a",{parentName:"p",href:"/features/datastores/"},"Datastore"),". Datastores are high-performance, low-latency, versioned, and scalable datasets which can be instantly mounted to any Session\xa0or\xa0Run."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"By default, Datastores are mounted at /datastores on a Session or Run."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"/datastores/[name]\n")),(0,i.kt)("p",{parentName:"div"},"If you've never created a Datastore before, you can follow this example from the ",(0,i.kt)("a",{parentName:"p",href:"/getting-started/getting-started-with-grid"},"Getting Started with Grid")," tutorial to create a Datastore from the popular ",(0,i.kt)("a",{parentName:"p",href:"https://www.cs.toronto.edu/~kriz/cifar.html"},"cifar dataset"),". "),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-text"},"# download\ncurl https://pl-flash-data.s3.amazonaws.com/cifar5.zip -o cifar5.zip\n# unzip\nunzip cifar5.zip\ngrid datastore create cifar5/ --name cifar5\n")),(0,i.kt)("p",{parentName:"div"},"Once the datastore has been successfully created, you can mount it to a Run using the ",(0,i.kt)("inlineCode",{parentName:"p"},"--datastore_name")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"--datastore_version")," properties. "),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-text"},"git clone https://github.com/PyTorchLightning/grid-tutorials.git\ncd grid-tutorials/features-intro/runs\ngrid run --name attaching-datastore --datastore_name cifar5 --datastore_version 1 datastore.py --data_dir /datastores/cifar5\n")),(0,i.kt)("p",{parentName:"div"},"The above code passes a script named ",(0,i.kt)("inlineCode",{parentName:"p"},"datastore.py")," to the Run. This script prints the contents of the Datastores root directory. You should see the following output in your stdout logs."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-text"},"['test', 'train']\n")),(0,i.kt)("h1",{parentName:"div",id:"next-steps"},"Next Steps"),(0,i.kt)("p",{parentName:"div"},"To learn more about Runs, please check out the following tutorials:"),(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.grid.ai/features/runs/Creating%20Runs/Basic%20Runs/sweep-syntax"},"Primer on Grid Sweep Syntax")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.grid.ai/features/runs/Analyzing%20Runs/README"},"Analyzing Runs")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.grid.ai/features/runs/Creating%20Runs/Adv%20Runs/README"},"Advanced Run Creation"))))))}d.isMDXComponent=!0},818:function(e,t,n){t.Z=n.p+"assets/images/requirements-021b966ea24339939a9f8f44ef74e7ce.png"}}]);